#	Example:
#
#	example_effect = {
#		add_political_power = 66
#		add_popularity = {
#			ideology = fascism
#			popularity = 0.33
#		}
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#

# Increases German trade reliance for Hungary
add_german_trade_HUN = {
	if = {
		limit = {
			NOT = {
				has_completed_focus = HUN_the_rise_of_germany
				has_completed_focus = HUN_bulwark_against_radicalism
			}
		}
		if = {
			limit = {
				has_idea = HUN_german_trade
			}
			swap_ideas = {
				remove_idea = HUN_german_trade
				add_idea = HUN_german_trade2
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_german_trade2
			}
			swap_ideas = {
				remove_idea = HUN_german_trade2
				add_idea = HUN_german_trade3
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_german_trade3
			}
			if = {
				limit = {
					is_subject = no
				}
				GER = {
					puppet = HUN
				}
			}
			else = {
				add_political_power = -50
			}
		}
		else = {
			add_ideas = HUN_german_trade
		}
	}
}

# Increases German trade reliance for Hungary
remove_german_trade_HUN = {
	if = {
		limit = {
			has_idea = HUN_german_trade
		}
		remove_ideas = HUN_german_trade
	}
	else_if = {
		limit = {
			has_idea = HUN_german_trade2
		}
		swap_ideas = {
			remove_idea = HUN_german_trade2
			add_idea = HUN_german_trade
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_german_trade3
		}
		swap_ideas = {
			remove_idea = HUN_german_trade3
			add_idea = HUN_german_trade2
		}
	}
	else = {
		if = {
			limit = {
				is_subject_of = GER
			}
			overlord = {
				set_autonomy = {
					target = HUN
					autonomy_state = autonomy_free
					end_wars = no
					end_civil_wars = no
				}
			}
			add_political_power = 30
		}
	}
}

# Increases loans for Hungary
add_loans_HUN = {
	if = {
		limit = {
			has_idea = HUN_loans
		}
		swap_ideas = {
			remove_idea = HUN_loans
			add_idea = HUN_loans2
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans2
		}
		swap_ideas = {
			remove_idea = HUN_loans2
			add_idea = HUN_loans3
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans3
		}
		swap_ideas = {
			remove_idea = HUN_loans3
			add_idea = HUN_loans4
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans4
		}
		swap_ideas = {
			remove_idea = HUN_loans4
			add_idea = HUN_loans5
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans5
		}
		add_political_power = -50
	}
	else = {
		add_ideas = HUN_loans
	}
}

# Decreases loans for Hungary
remove_loans_HUN = {
	if = {
		limit = {
			has_idea = HUN_loans
		}
		remove_ideas = HUN_loans
	}
	else_if = {
		limit = {
			has_idea = HUN_loans2
		}
		swap_ideas = {
			remove_idea = HUN_loans2
			add_idea = HUN_loans
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans3
		}
		swap_ideas = {
			remove_idea = HUN_loans3
			add_idea = HUN_loans2
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans4
		}
		swap_ideas = {
			remove_idea = HUN_loans4
			add_idea = HUN_loans3
		}
	}
	else_if = {
		limit = {
			has_idea = HUN_loans5
		}
		swap_ideas = {
			remove_idea = HUN_loans5
			add_idea = HUN_loans4
		}
	}
}

# Increases shortages for Hungary
add_shortages_HUN = {
	if = {
		limit = {
			NOT = { has_country_flag = HUN_not_backward }
		}

		if = {
			limit = {
				has_idea = HUN_shortages
			}
			swap_ideas = {
				remove_idea = HUN_shortages
				add_idea = HUN_shortages2
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_shortages2
			}
			swap_ideas = {
				remove_idea = HUN_shortages2
				add_idea = HUN_shortages3
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_shortages3
			}
			swap_ideas = {
				remove_idea = HUN_shortages3
				add_idea = HUN_shortages4
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_shortages4
			}
			swap_ideas = {
				remove_idea = HUN_shortages4
				add_idea = HUN_shortages5
			}
		}
		else_if = {
			limit = {
				has_idea = HUN_shortages5
			}
			add_political_power = -50
			if = {
				limit = {
					has_civil_war = no
					has_stability < 0.4
				}
				start_civil_war = {
					ideology = democratic
					size = 0.7
					states = { 43 }
				}
			}
		}
		else = {
			add_ideas = HUN_shortages
		}
	}
}

# Makes the opposition regime popular for Hungary
popular_opposition_HUN = {
	if = {
		limit = {
			has_idea = HUN_unpopular_opposition
		}
		remove_ideas = HUN_unpopular_opposition
	}
	if = {
		limit = {
			has_idea = HUN_unpopular_opposition2
		}
		remove_ideas = HUN_unpopular_opposition2
	}
	if = {
		limit = {
			has_idea = HUN_unpopular_opposition3
		}
		remove_ideas = HUN_unpopular_opposition3
	}
}

# Changes political parties to the 1939 situation for Hungary
change_parties_1939 = {
	set_party_name = {
		ideology = neutrality
		long_name = HUN_hungarian_life_long
		name = HUN_hungarian_life
	}

	if = {
		limit = {
			NOT = {
				has_completed_focus = HUN_appointzoltantildy
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = HUN_smallholders_party_long
			name = HUN_smallholders_party
		}
		if = {
			limit = {
				has_completed_focus = HUN_mission_to_the_us
			}
			add_country_leader_role = {
				character = HUN_zoltan_tildy
				promote_leader = yes
				country_leader = {
					ideology = socialism
					expire = "1965.1.1.1"
					traits = {
						coalition_pm
		}
		}
		set_party_name = {
			ideology = fascism
			long_name = HUN_arrow_cross_party_long
			name = HUN_arrow_cross_party
					}
		set_party_name = {
			ideology = fascism
			long_name = HUN_arrow_cross_party_long
			name = HUN_arrow_cross_party
				}
			}
		}
		else = {
			add_country_leader_role = {
				character = HUN_tibor_eckhardt
				promote_leader = yes
				country_leader = {
					ideology = liberalism
					expire = "1965.1.1.1"
					traits = {
						liberal_pm
					}
				}
			}
		}
	}

	if = {
		limit = {
			NOT = {
				has_completed_focus = HUN_elect_a_fascist_king
			}
		}
		set_party_name = {
			ideology = fascism
			long_name = HUN_arrow_cross_party_long
			name = HUN_arrow_cross_party
		}
	}
}

# Displays Trianon support decisions tooltips
trianon_support = {
	custom_effect_tooltip = when_selected_tt
	unlock_decision_tooltip = request_FROM_support
	custom_effect_tooltip = when_focus_tt
	custom_effect_tooltip = remove_support_tt
}

# Clears Trianon demand state flags
clear_trianon_flags = {
	every_state = {
		limit = {
			has_state_flag = trianon_target
		}
		clr_state_flag = trianon_target
	}
	every_state = {
		limit = {
			has_state_flag = trianon_alternate
		}
		clr_state_flag = trianon_alternate
	}
}

# Leaves faction
be_factionless = {
	if = {
		limit = {
			is_in_faction = yes
			is_faction_leader = no
		}
		leave_faction = yes
	}
}

# Becomes independent
be_free = {
	if = {
		limit = {
			is_subject = yes
		}
		OVERLORD = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
				end_wars = no
				end_civil_wars = no
			}
			create_wargoal = {
				type = puppet_wargoal_focus
				target = ROOT
			}
		}
	}
}

# Replaces Horthy with new non-aligned leader
replace_horthy = {
	if = {
		limit = {
			has_completed_focus = HUN_look_outwards
		}
		set_party_name = {
			ideology = neutrality
			name = HUN_neutrality_party
			long_name = HUN_neutrality_party_long
		}
	}
	if = {
		limit = {
			has_completed_focus = HUN_elect_deputy_regent
			has_character = HUN_istvan_horthy
		}
		add_country_leader_role = {
			character = HUN_istvan_horthy
			promote_leader = yes
			country_leader = {
				ideology = centrism
				expire = "1965.1.1"
				traits = {
					deputy_regent2
				}
			}
		}
	}
	else_if = {
		limit = {
			has_character = HUN_pal_teleki
		}
		add_country_leader_role = {
			character = HUN_pal_teleki
			promote_leader = yes
			country_leader = {
				ideology = moderatism
				expire = "1965.1.1.1"
				traits = {
					patriot_pm
				}
			}
		}
	}
	else_if = {
		limit = {
			has_completed_focus = HUN_asoldierofmikloshorthy
		}
		add_country_leader_role = {
			character = HUN_geza_lakatos
			promote_leader = yes
			country_leader = {
				ideology = moderatism
				expire = "1965.1.1"
				traits = {
					patriot_pm
				}
			}
		}
	}
	else = {
		add_country_leader_role = {
			character = HUN_istvan_bethlen
			promote_leader = yes
			country_leader = {
				ideology = moderatism
				expire = "1965.1.1"
				traits = {
					aristocrat_pm
				}
			}
		}
	}
}

# Make Bethlen ruler of Transylvania
bethlen_ruler = {
	if = {
		limit = {
			has_country_leader = { character = HUN_istvan_bethlen }
		}
		add_country_leader_role = {
			character = HUN_geza_lakatos
			promote_leader = yes
			country_leader = {
				ideology = moderatism
				expire = "1965.1.1"
				traits = {
					patriot_pm
				}
			}
		}
	}
	TRA = {
		add_country_leader_role = {
			character = HUN_istvan_bethlen
			promote_leader = yes
			country_leader = {
				ideology = moderatism
				expire = "1965.1.1"
				traits = {
					aristocrat_pm
				}
			}
		}
	}
}

### Adds balance of power ###
# Adds small balance of power
HUN_add_liberal_bop_small = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.05
		}
	}
}

HUN_add_conservative_bop_small = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.05
		}
	}
}

HUN_add_army_bop_small = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.05
		}
	}
}

HUN_add_crown_bop_small = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.05
		}
	}
}

HUN_add_liberal_bop_medium = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.1
		}
	}
}

HUN_add_conservative_bop_medium = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.1
		}
	}
}

HUN_add_army_bop_medium = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.1
		}
	}
}

HUN_add_crown_bop_medium = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.1
		}
	}
}

HUN_add_liberal_bop_large = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.15
		}
	}
}

HUN_add_conservative_bop_large = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_liberals_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.15
		}
	}
}

HUN_add_army_bop_large = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = -0.15
		}
	}
}

HUN_add_crown_bop_large = {
	if = {
		limit = {
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_crown_side
			}
			is_power_balance_side_active = {
				id = HUN_power_balance
				side = HUN_army_side
			}
		}
		add_power_balance_value = {
			id = HUN_power_balance
			value = 0.15
		}
	}
}

# Adds small favour
HUN_add_favour_small = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_favour = 1 }
			clamp_variable = {
				var = peace_favour
				max = 20
			}
		}

		custom_effect_tooltip = add_favour_small_tt
	}
}

# Adds small suspicion
HUN_add_suspicion_small = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_suspicion = 1 }
			clamp_variable = {
				var = peace_suspicion
				max = 10
			}
		}

		custom_effect_tooltip = add_suspicion_small_tt
	}
}

# Adds medium favour
HUN_add_favour_medium = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_favour = 2 }
			clamp_variable = {
				var = peace_favour
				max = 20
			}
		}

		custom_effect_tooltip = add_favour_medium_tt
	}
}

# Adds medium suspicion
HUN_add_suspicion_medium = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_suspicion = 2 }
			clamp_variable = {
				var = peace_suspicion
				max = 10
			}
		}

		custom_effect_tooltip = add_suspicion_medium_tt
	}
}

# Adds large favour
HUN_add_favour_large = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_favour = 3 }
			clamp_variable = {
				var = peace_favour
				max = 20
			}
		}

		custom_effect_tooltip = add_favour_large_tt
	}
}

# Adds large suspicion
HUN_add_suspicion_large = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_suspicion = 3 }
			clamp_variable = {
				var = peace_suspicion
				max = 10
			}
		}

		custom_effect_tooltip = add_suspicion_large_tt
	}
}

# Adds maximum favour
HUN_add_favour_max = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_favour = 10 }
			clamp_variable = {
				var = peace_favour
				max = 20
			}
		}

		custom_effect_tooltip = add_favour_max_tt
	}
}

# Adds maximum suspicion
HUN_add_suspicion_max = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			add_to_variable = { peace_suspicion = 10 }
			clamp_variable = {
				var = peace_suspicion
				max = 10
			}
		}

		custom_effect_tooltip = add_suspicion_max_tt
	}
}

# Removes small favour
HUN_remove_favour_small = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_favour = 1 }
			clamp_variable = {
				var = peace_favour
				min = 0
			}
		}

		custom_effect_tooltip = remove_favour_small_tt
	}
}

# Removes small suspicion
HUN_remove_suspicion_small = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_suspicion = 1 }
			clamp_variable = {
				var = peace_suspicion
				min = 0
			}
		}

		custom_effect_tooltip = remove_suspicion_small_tt
	}
}

# Removes medium favour
HUN_remove_favour_medium = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_favour = 2 }
			clamp_variable = {
				var = peace_favour
				min = 0
			}
		}

		custom_effect_tooltip = remove_favour_medium_tt
	}
}

# Removes medium suspicion
HUN_remove_suspicion_medium = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_suspicion = 2 }
			clamp_variable = {
				var = peace_suspicion
				min = 0
			}
		}

		custom_effect_tooltip = remove_suspicion_medium_tt
	}
}

# Removes large favour
HUN_remove_favour_large = {
	if = {
		limit = {
			is_favour_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_favour = 3 }
			clamp_variable = {
				var = peace_favour
				min = 0
			}
		}

		custom_effect_tooltip = remove_favour_large_tt
	}
}

# Removes large suspicion
HUN_remove_suspicion_large = {
	if = {
		limit = {
			is_suspicion_target = yes
		}

		hidden_effect = {
			subtract_from_variable = { peace_suspicion = 3 }
			clamp_variable = {
				var = peace_suspicion
				min = 0
			}
		}

		custom_effect_tooltip = remove_suspicion_large_tt
	}
}
